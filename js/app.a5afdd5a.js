(function(e){function t(t){for(var a,l,r=t[0],s=t[1],i=t[2],b=0,d=[];b<r.length;b++)l=r[b],Object.prototype.hasOwnProperty.call(c,l)&&c[l]&&d.push(c[l][0]),c[l]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);u&&u(t);while(d.length)d.shift()();return o.push.apply(o,i||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,r=1;r<n.length;r++){var s=n[r];0!==c[s]&&(a=!1)}a&&(o.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},c={app:0},o=[];function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/vue-mosaic-generator/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=t,r=r.slice();for(var i=0;i<r.length;i++)t(r[i]);var u=s;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0427":function(e,t,n){},"1d82":function(e,t,n){},"25a1":function(e,t,n){"use strict";n("ee33")},"2b19":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var a=n("7a23");function c(e,t,n,c,o,l){const r=Object(a["q"])("Home");return Object(a["m"])(),Object(a["c"])(r)}var o=n("ee38"),l=n.n(o);const r={class:"container"},s=["src"],i={key:0,class:"content"};var u={__name:"SidePanel",setup(e){const t=Object(a["n"])(!0);return(e,n)=>(Object(a["m"])(),Object(a["e"])("div",r,[Object(a["f"])("div",{class:Object(a["j"])(["side-panel",{open:t.value}])},[Object(a["f"])("button",{class:"close-btn",onClick:n[0]||(n[0]=e=>t.value=!t.value)},[Object(a["f"])("img",{class:"arrow",src:Object(a["s"])(l.a),alt:"Arrow icon"},null,8,s)]),t.value?(Object(a["m"])(),Object(a["e"])("div",i,[Object(a["p"])(e.$slots,"default")])):Object(a["d"])("",!0)],2)]))}},b=(n("fe30"),n("6b0d")),d=n.n(b);const p=d()(u,[["__scopeId","data-v-959dd79e"]]);var v=p;const f={class:"title"},O=["onClick"];var j={__name:"Dropdown",props:{options:Array,title:String,placeholder:String,selectedOption:[String,Number]},emits:["change"],setup(e,{emit:t}){const n=e,c=t,o=Object(a["n"])(!1),l=Object(a["n"])(0),r=Object(a["n"])(n.options.find(e=>e.value===n.selectedOption)),s=Object(a["n"])(null),i=Object(a["n"])(null),u=async()=>{o.value=!o.value,o.value&&(await Object(a["i"])(),d())},b=e=>{r.value=e,o.value=!1,c("change",e.value)},d=()=>{i.value&&(l.value=i.value.offsetWidth)},p=e=>{s.value&&!s.value.contains(e.target)&&(o.value=!1)};return Object(a["l"])(()=>{d(),document.addEventListener("click",p)}),(t,n)=>(Object(a["m"])(),Object(a["e"])("div",{ref_key:"dropdownRef",ref:s,class:"dropdown"},[Object(a["f"])("div",f,Object(a["r"])(e.title),1),Object(a["f"])("div",{ref_key:"dropdownButtonRef",ref:i,class:"dropdown-button",onClick:u},Object(a["r"])(e.selectedOption?r.value.label:void 0!==e.placeholder?e.placeholder:"Select an option"),513),o.value?(Object(a["m"])(),Object(a["e"])("ul",{key:0,class:"dropdown-list",style:Object(a["k"])({width:l.value+"px"})},[(Object(a["m"])(!0),Object(a["e"])(a["a"],null,Object(a["o"])(e.options,e=>(Object(a["m"])(),Object(a["e"])("li",{class:Object(a["j"])(["dropdown-option",{selected:r.value.label===e.label}]),key:e.value,onClick:t=>b(e)},Object(a["r"])(e.label),11,O))),128))],4)):Object(a["d"])("",!0)],512))}};n("ad50");const m=d()(j,[["__scopeId","data-v-60a85c1a"]]);var h=m,g={__name:"Button",props:{title:String,type:String},emits:["click"],setup(e){return(t,n)=>(Object(a["m"])(),Object(a["e"])("button",{class:Object(a["j"])(["btn",e.type]),type:"submit",onClick:n[0]||(n[0]=e=>t.$emit("click"))},Object(a["r"])(e.title),3))}};n("25a1");const y=d()(g,[["__scopeId","data-v-70694028"]]);var w=y;const _={key:0,class:"uploader"},k={class:"file-upload"},S={key:0,class:"preview"},C=["src"];var P={__name:"FileUploader",props:{btnLabel:String},emits:["selected"],setup(e){const t=Object(a["n"])(!1),n=Object(a["n"])(null),c=Object(a["n"])(null),o=e=>{const n=e.target.files[0];if(n){const e=new FileReader;e.onload=()=>{c.value=e.result},e.readAsDataURL(n),t.value=!0}};return(t,l)=>n.value?Object(a["d"])("",!0):(Object(a["m"])(),Object(a["e"])("div",_,[Object(a["f"])("label",k,[Object(a["g"])(Object(a["r"])(e.btnLabel)+" ",1),n.value?Object(a["d"])("",!0):(Object(a["m"])(),Object(a["e"])("input",{key:0,type:"file",onChange:o,accept:"image/*"},null,32))]),c.value&&!n.value?(Object(a["m"])(),Object(a["e"])("div",S,[Object(a["f"])("img",{src:c.value,alt:"Image preview"},null,8,C),Object(a["h"])(w,{onClick:l[0]||(l[0]=e=>t.$emit("selected",c.value)),title:"Create mosaic",type:"primary"})])):Object(a["d"])("",!0)]))}};n("75f6");const I=d()(P,[["__scopeId","data-v-c0417620"]]);var x=I;const M="https://photo-mosaic-backend.herokuapp.com";async function L(e,t){try{const n=await fetch(`${M}/photos?query=${e}&color=${t}`),a=await n.json();return a}catch(n){console.error("Error fetching images:",n)}}class R{constructor(){this.themes={}}addPhotos(e,t,n){this.themes[e]||(this.themes[e]={}),this.themes[e][t]||(this.themes[e][t]=[]),this.themes[e][t].push(...n)}getPhotos(e,t){return this.themes[e]&&this.themes[e][t]?this.themes[e][t]:[]}getRandomPhoto(e,t){const n=this.getPhotos(e,t);if(0===n.length)return console.warn(`No photos found for theme: "${e}", color: "${t}"`),null;const a=Math.floor(Math.random()*n.length);return n[a]}}const $={class:"container"},U={class:"panel"},A={class:"current"},D={class:"new"};var E={__name:"Mosiac",props:{imgSrc:String},setup(e){const t=e,n=[{value:2,label:"Extra small"},{value:5,label:"Small"},{value:10,label:"Medium"},{value:20,label:"Large"}],c=[{value:"abstract",label:"Abstract"},{value:"cartoon",label:"Cartoon"},{value:"fashion",label:"Fashion"},{value:"food",label:"Food"},{value:"nature",label:"Nature"},{value:"sports",label:"Sports"}],o=Object(a["n"])(null),l=Object(a["n"])(t.imgSrc),r=Object(a["n"])(5),s=Object(a["n"])("nature");let i=new R;function u(e,t){switch(e){case"size":r.value=t;break;case"theme":s.value=t;break;default:break}}function b(e,t,n){const a={black:{r:0,g:0,b:0},white:{r:255,g:255,b:255},yellow:{r:255,g:255,b:0},orange:{r:255,g:165,b:0},red:{r:255,g:0,b:0},purple:{r:128,g:0,b:128},magenta:{r:255,g:0,b:255},green:{r:0,g:255,b:0},teal:{r:0,g:128,b:128},blue:{r:0,g:0,b:255}};let c="",o=1/0;for(let l in a){const{r:r,g:s,b:i}=a[l],u=Math.sqrt((e-r)**2+(t-s)**2+(n-i)**2);u<o&&(o=u,c=l)}return c}async function d(e){const t=i.themes[s.value]||{},n=t[e]||[];if(0===n.length){const t=await L(s.value,e);i.addPhotos(s.value,e,t)}return i.getRandomPhoto(s.value,e)}async function p(e,t){for(let n=0;n<t.height;n+=r.value)for(let a=0;a<t.width;a+=r.value){const t=e.getImageData(a,n,1,1).data,[c,o,l]=t,s=b(c,o,l),i=await d(s);if(i){const t=new Image;t.crossOrigin="anonymous",t.onload=()=>{e.drawImage(t,a,n,r.value,r.value)},t.src=i.urls.small}}}const f=()=>{const e=document.createElement("a");e.download="mosaic-image.png",e.href=o.value.toDataURL("image/png"),e.click()};async function O(){const e=o.value;if(!e||!l.value)return;const t=e.getContext("2d"),n=new Image;n.onload=async()=>{e.width=n.width,e.height=n.height,t.drawImage(n,0,0),await p(t,n)},n.onerror=e=>console.error("Failed to load image",e),n.crossOrigin="anonymous",n.src=l.value}function j(e){l.value=e,O()}return Object(a["l"])(()=>{O()}),(e,t)=>(Object(a["m"])(),Object(a["e"])("div",$,[Object(a["h"])(v,null,{default:Object(a["t"])(()=>[Object(a["f"])("div",U,[Object(a["f"])("div",A,[t[3]||(t[3]=Object(a["f"])("h3",null,"Current image",-1)),Object(a["h"])(h,{options:n,selectedOption:r.value,title:"Tile size",placeholder:"Select size",onChange:t[0]||(t[0]=e=>u("size",e))},null,8,["selectedOption"]),Object(a["h"])(h,{options:c,selectedOption:s.value,title:"Image theme",placeholder:"Select theme",onChange:t[1]||(t[1]=e=>u("theme",e))},null,8,["selectedOption"]),Object(a["h"])(w,{onClick:O,title:"Update",type:"secondary"}),Object(a["h"])(w,{onClick:f,title:"Download mosaic",type:"primary"})]),Object(a["f"])("div",D,[t[4]||(t[4]=Object(a["f"])("h3",null,"New",-1)),Object(a["h"])(x,{onSelected:t[2]||(t[2]=e=>j(e)),btnLabel:"Upload new image"})])])]),_:1}),Object(a["f"])("canvas",{id:"canvas",ref_key:"canvasRef",ref:o},null,512)]))}};n("d167");const F=d()(E,[["__scopeId","data-v-2303d3b2"]]);var z=F;const N={class:"container"},q={key:0,class:"intro"};var H={__name:"Home",setup(e){const t=Object(a["n"])(null),n=Object(a["n"])(null),c=e=>{n.value=e,t.value=!0};return(e,o)=>(Object(a["m"])(),Object(a["e"])("div",N,[t.value?(Object(a["m"])(),Object(a["c"])(z,{key:1,imgSrc:n.value},null,8,["imgSrc"])):(Object(a["m"])(),Object(a["e"])("div",q,[o[0]||(o[0]=Object(a["f"])("div",{class:"description"},[Object(a["f"])("h1",null,"Photo Mosaic Generator"),Object(a["f"])("p",null," Upload an image and watch it become a photo mosaic before your eyes "),Object(a["f"])("p",null,"Each image will be made up of many smaller images or tiles")],-1)),Object(a["h"])(x,{onSelected:c,btnLabel:"Upload image"})]))]))}};n("aa3d");const T=d()(H,[["__scopeId","data-v-69e45319"]]);var B=T,J={name:"App",components:{Home:B}};n("6865");const G=d()(J,[["render",c]]);var W=G;Object(a["b"])(W).mount("#app")},6865:function(e,t,n){"use strict";n("1d82")},"75f6":function(e,t,n){"use strict";n("f2c6")},7802:function(e,t,n){},aa28:function(e,t,n){},aa3d:function(e,t,n){"use strict";n("7802")},ad50:function(e,t,n){"use strict";n("aa28")},d167:function(e,t,n){"use strict";n("0427")},ee33:function(e,t,n){},ee38:function(e,t,n){e.exports=n.p+"img/arrowhead.0bc61ab0.svg"},f2c6:function(e,t,n){},fe30:function(e,t,n){"use strict";n("2b19")}});
//# sourceMappingURL=app.a5afdd5a.js.map